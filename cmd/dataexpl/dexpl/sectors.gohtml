<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>{{ .maddr }} - Deals - Data Explorer</title>
    <style>
        html, body {
            font-family: monospace;
        }
        td {
            padding: 0 1em;
        }
        tr:nth-child(even) {background: #e0e0e0}
    </style>
</head>
<body>
<div>
    <span id="ping{{.maddr}}" onload="pingMiner()">pinging..</span>
    <script>
        async function pingMiner(ma) {
            document.getElementById("ping"+ma).innerText = "connecting.."

            let r = await fetch("/ping/miner/"+ma)

            document.getElementById("ping"+ma).innerText = await r.text()
        }

        addEventListener('load', (_) => {
            pingMiner('{{.maddr}}')
        })
    </script>

    {{ $ma := .maddr }}
    {{ $deals := .deals }}
    {{range .sectors}}
        {{if (gt (len .DealIDs) 0)}}
            <div>
                <div style="font-size: 20; font-weight: bold; display: inline-block">Sector {{.SectorNumber}}
                    {{range .DealIDs}}
                        <div style="display: inline-block">
                            <div><a href="/deal/{{.}}">Deal {{.}}</a></div>
                            <div><span style="font-size: 4px">{{ index $deals . }}</span></div>
                        </div>
                    {{end}}
                </div>
            </div>
        {{end}}
    {{end}}
</div>
</body>
</html>